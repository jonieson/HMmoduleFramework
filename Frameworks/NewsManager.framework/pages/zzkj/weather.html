<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta content="telephone=no" name="format-detection" /> 
  <meta name="author" content="kn" />
  <link type="text/css" rel="stylesheet" href="content/css/reset.css" />
  <link type="text/css" rel="stylesheet" href="content/css/common.css" />
  <link type="text/css" rel="stylesheet" href="content/css/weather.css" />
 <script src="content/js/Highcharts-6.1.0/code/highcharts.js"></script>
 <script src="content/js/Highcharts-6.1.0/code/themes/sunset.js"></script>
 <script src="content/js/jquery-2.1.1.js"></script>
  <title>天气查询</title>
</head> 
<body class="weather">

  <div class="container">
    <div class="head">
      <a class="location" href="#">
        <i class="add"></i>
        <span>成都</span>
        <!-- <span>武侯祠</span> -->
        <i class="lo"></i>
      </a>
      <a href="index.html" class="home"><i></i></a>
    </div> 
    <!-- 今明两天天气 -->
	
    <section class="top">
      <div class="info">
        <table id="todayInfo">
        </table>
      </div>
    </section> 
    <!-- 24小时预报 -->
    <section class="hours">
      <h2 class="title">24小时预报</h2>
      <div class="main">
        <div class="chart">
          <div id="hours" style="width:100%; height: 3.15rem;"></div>

          <script type="text/javascript">

          Highcharts.chart('hours', {
              chart: {
                  type: 'line',
                  backgroundColor: null
              },
              title: {
                  text: ''
              },
              subtitle: {
                  text: ''
              },
              xAxis: {
                  categories: ['现在', '23:00', '00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00'],
                  labels: {
                    style: {
                      fontSize: '.18rem',
                      color: '#fff'
                    }
                  },
              },
              yAxis: {
                  title: {
                      text: ''
                  },
                  gridLineColor: 'rgba(255,255,255,.1)',
                  labels: {
                    style: {
                      color: '#fff'
                    },
                    formatter:function (){   
                         return this.value + '°' ;   
                    }
                  } 
              },
              plotOptions: {
                  line: {
                      dataLabels: {
                          enabled: true,
                          formatter: function() {return this.y+'°';}
                      },
                      enableMouseTracking: false
                  },
                  Tooltip:{
                    enabled: true
                  }
              },
              series: [{
                  name: '',
                  data: [17, 15, 14, 13, 11, 10, 17, 15, 14, 13, 11, 10, 17, 15, 14, 13, 11, 10, 17, 15, 14, 13, 11, 10],
                  marker:{
                    fillColor:'#fff' 
                  }
              }],
              credits: {  
                  enabled: false
              },
              legend: {                                                                    
                enabled: false                                                           
              },
              dataLabels:{
                enabled: true
              },

          });
          </script>
        </div>
      </div>
    </section>
    <!-- 15天预报 -->
    <section class="days">    
      <h2 class="title">7天预报</h2>
      <div class="main">
        <ol class="weather-day">
          
          </ol> 
        <div class="chart">
          <div id="day" style="width:45%; height: 1.6rem;"></div>

		  <script type="text/javascript">
	var today = new Date(); 
	$.ajax({
                          url: "http://v.juhe.cn/weather/index?format=2&cityname=成都&key=cc1b82d0e54e731e233f34a358a1167a", 
//							url:"json/sichuan.json",
                            type: "GET",
                            success: function (response) { 
//                          	alert(content.resultcode);
//                          	var response=eval('('+content+')');
//                          	alert(response.resultcode);
							if(response.resultcode==200){ 
							var  dayinfo=response.result.today;
							var future=response.result.future;
							 $("#todayInfo").append('<tr><td><span class="time">'+dayinfo.date_y+'</span>'+ 
							 ' <td class="rg"><span class="temperature">'+dayinfo.temperature+'</span> </td> </tr>'+
							 '<tr><td><span class="meteorology">'+dayinfo.weather+'</span></td><td class="rg"></td></tr>'); 
							}
							var temperatureArray1=[];
							var temperatureArray2=[];
                                <!-- alert(result); -->
								 $.each(future, function(i, item) { 
								 var temperature=item.temperature.split("~"); 
								 temperatureArray1.push(parseInt(temperature[0].replace("℃","")));
								 temperatureArray2.push(parseInt(temperature[1].replace("℃","")));
								  var metelogy=item.weather.split("转");  
								  if(typeof(metelogy[1])=="undefined")
								  {
								  metelogy[1]=metelogy[0]; 
								  }
							  $(".weather-day").append(' <li class="item"> <p class="day">'+item.week+'</p><p class="date">'+item.date.substring(4,6)+'/'+item.date.substring(6,8)+
							  '</p><div class="daytime"><p class="meteorology">'+metelogy[0]+'</p><span class="wicon"></span> </div> <div class="night"><span class="wicon"></span><p class="meteorology">'+metelogy[1]+'</p></div><p class="wind">'+item.wind+'</p> </li>');
							

							});
                            
							highchartLine(temperatureArray1,temperatureArray2);
							},
                            error: function (e) {
                            }
                        });
						 
	</script>
	
	
          <script type="text/javascript">
function highchartLine(array1,array2){
          Highcharts.chart('day', {
              colors: ['#fff700', '#8ee5ff'],
              chart: {
                  type: 'line',
                  backgroundColor: null,
                  marginRight: 20,
                  marginLeft: 20
              },
              title: {
                  text: ''
              },
              subtitle: {
                  text: ''
              },
              xAxis: {
                  tickWidth: 0,
                  lineWidth: 0,
                  labels:{  
                      enabled:false  
                  }
              },
              yAxis: {
                  title: {
                      text: ''
                  },
                  tickWidth: 0,
                  gridLineWidth: 0,
                  labels:{  
                      enabled:false  
                  }
              },
              plotOptions: {
                  line: {
                      dataLabels: {
                          enabled: true,
                          formatter: function() {return this.y+'°';}
                      },
                      enableMouseTracking: false
                  }
              },
              series: [{
                  name: '',
                  <!-- data: [21, 22, 28, 15, 19, 21, 21, 20, 22, 18, 19, 23, 22, 24, 25], -->
				  data:array1,
                  marker:{
                    fillColor:'#fff' 
                  }
              },{
                  name: '',
                  <!-- data: [11, 11, 9, 12, 14, 14, 11, 11, 9, 12, 14, 14, 11, 11, 9], -->
				  data:array2,
                  marker:{
                    fillColor:'#fff',
                    symbol: 'circle' 
                  }
              }],
              credits: {  
                  enabled: false
              },
              legend: {                                                                    
                enabled: false                                                           
              }
          });      
          
}
		  </script>
        </div>
      </div>
    </section>
  </div>
</body>
</html>